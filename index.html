<script>
    const computerPlay = () => {
        let random = Math.floor(Math.random() * 3);
        if (random === 0) {
            console.log('computer chose rock');
            return 'rock';
        } else if (random === 1) {
            console.log('computer chose paper');
            return 'paper';
        } else if (random === 2) {
            console.log('computer chose scissors');
            return 'scissors';
        }
    }
    
    const playerPlay = () => {
        let userSelection = prompt('Choose between rock, paper and scissors:');
        userSelection = userSelection.toLowerCase();
        if (userSelection === 'rock') {
            console.log(`user chose ${userSelection}`)
            return userSelection;
        } else if (userSelection === 'paper'){
            console.log(`user chose ${userSelection}`)
            return userSelection;
        } else if (userSelection === 'scissors') {
            console.log(`user chose ${userSelection}`)
            return userSelection;
        } else {
            console.log('word entered not recognized, please try again');
            playerPlay();
        }
    }

    const playRound = (playerSelection, computerSelection) => {
         if (playerSelection === 'rock' && computerSelection === 'rock') {
            console.log("Draw! Player and computer both chose 'rock'!");
            return 'draw';
         } else if (playerSelection === 'rock' && computerSelection === 'paper') {
            console.log("You lose! paper beats rock!");
            return 'lose';
         } else if (playerSelection === 'rock' && computerSelection === 'scissors') {
            console.log("You win! rock beats scissors!");
            return 'win';
         } else if (playerSelection === 'paper' && computerSelection === 'rock') {
            console.log("You win! paper beats rock!");
            return 'win';
         } else if (playerSelection === 'paper' && computerSelection === 'paper') {
            console.log("Draw! Player and computer both chose 'paper'!");
            return 'draw';
         } else if (playerSelection === 'paper' && computerSelection === 'scissors') {
            console.log("You lose! scissors beats paper!");
            return 'lose';
         } else if (playerSelection === 'scissors' && computerSelection === 'rock') {
            console.log("You lose! rock beats scissors!");
            return 'lose';
         } else if (playerSelection === 'scissors' && computerSelection === 'paper') {
            console.log("You win! scissors beats paper!");
            return 'win';
         } else if (playerSelection === 'scissors' && computerSelection === 'scissors') {
            console.log("Draw! Player and computer both chose 'scissors'!");
            return 'draw';
         }
    }

    const game = () => {
        const games = 5;
        let userScore = 0;
        let computerScore = 0;
        for (let i=1; i <=games; i++) {
            const round = () => {
                const play = playRound(playerPlay(), computerPlay());
                if (play === "draw") {
                round()
                } else if (play === "win") {
                userScore += 1;
                } else if (play === "lose") {
                computerScore += 1;
                }
                console.log(`(Score) Player: ${userScore}, Computer: ${computerScore}`);
            }  
            round();
        }
        if (userScore > computerScore) {
            console.log('Congratulations, you have won the game!');
        } else {
            console.log('You have lost the game :(');
        }
    }

    game();
</script>